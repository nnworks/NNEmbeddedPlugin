<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="nl.nnworks.nnembedded.project.nature.NaturePropertyTester"
            id="NNEmbeddedPlugin.hasNNEmbeddedNature"
            namespace="nl.nnworks.nnembedded.project.nature"
            properties="hasNNEmbeddedNature"
            type="java.lang.Object">
      </propertyTester>
   </extension>
   <extension 
         id="nnembeddednature"
         name="NNWorks Embedded Nature"
         point="org.eclipse.core.resources.natures">
         
      <runtime>
         <run class="nl.nnworks.nnembedded.project.nature.NNEmbeddedProjectNature" />
      </runtime>
      
      <requires-nature id="org.eclipse.cdt.core.ccnature" />

   </extension>
   <extension
         id="nl.nnworks.nnembedded.nature.convertcommand"
         name="Convert to NNEmbedded project"
         point="org.eclipse.ui.commands">
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="nl.nnworks.nnembedded.project.nature.ConvertCommand"
            commandId="nl.nnworks.nnembedded.nature.convertcommand">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.ui.projectConfigure">
         <command
               commandId="nl.nnworks.nnembedded.nature.convertcommand"
               label="Convert to NNEmbedded Project"
               style="push"
               tooltip="tooltip">
            <visibleWhen>
               <!-- forcePluginActivation needed because else the property tester is not initialized -->
               <test
                     forcePluginActivation="true"
                     property="nl.nnworks.nnembedded.project.nature.hasNNEmbeddedNature"
                     value="false">
               </test>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
</plugin>
